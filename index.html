
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión de Cuentas Streaming</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f4f4f4; }
        .actions button { margin-right: 5px; }
    </style>
</head>
<body>

    <h2>Gestión de Cuentas Streaming</h2>

    <h3>Agregar Cuenta</h3>
    <input type="email" id="correo" placeholder="Correo">
    <input type="text" id="contraseña" placeholder="Contraseña">
    <input type="text" id="plataforma" placeholder="Plataforma">
    <input type="number" id="perfiles" placeholder="Perfiles">
    <input type="date" id="fecha_vencimiento">
    <input type="text" id="estado_pago" placeholder="Estado de pago">
    <input type="text" id="whatsapp_cliente" placeholder="WhatsApp Cliente">
    <button onclick="agregarCuenta()">Agregar</button>

    <h3>Lista de Cuentas</h3>
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Correo</th>
                <th>Contraseña</th>
                <th>Plataforma</th>
                <th>Perfiles</th>
                <th>Vencimiento</th>
                <th>Pago</th>
                <th>WhatsApp</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody id="cuentas-list"></tbody>
    </table>

    <script>
        const SUPABASE_URL = "TU_SUPABASE_URL";
        const SUPABASE_ANON_KEY = "TU_SUPABASE_ANON_KEY";

        const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        async function cargarCuentas() {
            const { data, error } = await supabase.from("netflix").select("*");
            if (error) {
                console.error("Error al cargar cuentas:", error);
                return;
            }

            const tbody = document.getElementById("cuentas-list");
            tbody.innerHTML = "";
            data.forEach(cuenta => {
                const row = document.createElement("tr");
                row.innerHTML = `
                    <td>${cuenta.id}</td>
                    <td>${cuenta.correo}</td>
                    <td>${cuenta.contraseña || "N/A"}</td>
                    <td>${cuenta.plataforma || "N/A"}</td>
                    <td>${cuenta.perfiles || "N/A"}</td>
                    <td>${cuenta.fecha_vencimiento ? new Date(cuenta.fecha_vencimiento).toLocaleDateString() : "N/A"}</td>
                    <td>${cuenta.estado_pago}</td>
                    <td>${cuenta.whatsapp_cliente || "N/A"}</td>
                    <td class="actions">
                        <button onclick="eliminarCuenta(${cuenta.id})">Eliminar</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        async function agregarCuenta() {
            const correo = document.getElementById("correo").value;
            const contraseña = document.getElementById("contraseña").value;
            const plataforma = document.getElementById("plataforma").value;
            const perfiles = document.getElementById("perfiles").value;
            const fecha_vencimiento = document.getElementById("fecha_vencimiento").value;
            const estado_pago = document.getElementById("estado_pago").value || "pendiente";
            const whatsapp_cliente = document.getElementById("whatsapp_cliente").value;

            if (!correo || !plataforma || !perfiles || !fecha_vencimiento) {
                alert("Los campos de correo, plataforma, perfiles y vencimiento son obligatorios.");
                return;
            }

            const { data, error } = await supabase.from("netflix").insert([
                { correo, contraseña, plataforma, perfiles, fecha_vencimiento, estado_pago, whatsapp_cliente }
            ]);

            if (error) {
                console.error("Error al agregar cuenta:", error);
                return;
            }

            cargarCuentas();
            document.getElementById("correo").value = "";
            document.getElementById("contraseña").value = "";
            document.getElementById("plataforma").value = "";
            document.getElementById("perfiles").value = "";
            document.getElementById("fecha_vencimiento").value = "";
            document.getElementById("estado_pago").value = "";
            document.getElementById("whatsapp_cliente").value = "";
        }

        async function eliminarCuenta(id) {
            const { error } = await supabase.from("netflix").delete().eq("id", id);
            if (error) {
                console.error("Error al eliminar cuenta:", error);
                return;
            }
            cargarCuentas();
        }

        document.addEventListener("DOMContentLoaded", cargarCuentas);
    </script>

</body>
</html>

       
